안전한 소프트웨어 만들기
구현단계에서 나오는 소스코드를 안전하게 만들자
시큐어코딩이라는 일정한 규칙에 따라서 만들면 문제점이 사라진다

분석,설계,구현,테스트,이행 모든 단계가
보안을 고려해서 해야 한다. 이런 개념이 개발보안. (MS-SDL, 7touch point, OWASP CLASP)

설계단계에서 반드시 해야한 것-위험 모델링
우리가 만들 목표 시스템에 존재할 수 있는 위험을 미리 도출
1. 팀이 만들어져야 함
2. 어플리케이션을 분해-구조화된 다이어그램을 사용한다. MS-DFD =>위협이 될 수 있는 위험목표를 식별하기 위해
3.★ 분해된것으로 위협을 결정-위협을 분류해서 결정, 위협트리를 사용
        막연하게 어떤 문제가 발생할지를 검증하는 작업.
    분류기법 STRIDE
        1.S 신분위장
        2.T 데이타변조
        3.R 부인
        4.I 정보유출
        5.D 서비스 거부
        6.E 권한상승 
4. 결정된 위협을 가지고 우선순위를 결정- DREAD
5. 우선순위가 높은 것부터 대응방법을 결정한다.
    대응방법 4가지
        1. 무시
        2. 사용자에게 알린다.
        3. 문제를 고친다.(해당하는 기능을 살리고 문제가 발생하지 않도록)
        4. 제거한다.(기능 자체가 사라져 버리는 것.
6. 대응방법에 따라 기법과 기술을 결정한다.
    일반화된 방법이 있다.

취약점DB
CWE )   
CVE )   => SANS TOP 25, OWASP TOP 10

secure coding guide. c, c++, java, parl.

서버에서 만든 데이타가 사용자에게 안전하게 전달되게 하려면 html인코딩
바이너리데이타를 텍스트 기반의 데이터로 저장할 때 base64 사용.
+
+

10개의 취약점
1. SQL injection.
    외부 입력값이 쿼리를 만들때 쿼리 조작 포함 여부를 검증하지 않은 것
    -권한 밖 데이타에 접근가능, 마음대로 데이타를 조작하게 됨
방어기법- 1. 정적 쿼리를 이용(입력값에 영향을 받지 않고 동일한 쿼리)
         2. 검증하고 사용한다.
         3. 오류 메시지 통제
         4. DB 접속권한 최소화
2. 운영체제 명령어 삽입
외부 입력값을 해당되는 쉘에 검증.제한하지 않고 사용 - 의도하지않은 쉘 명령어 사용될 수 있다/
꼭 실행해야하는지 확인, 대체기능으로 대체, 정해진 범위 내에서 사용한다.
(화이트리스트- 허용목록) 방식
추가 명령어를 실행할 수 있는 것들 들어오지 않도록

3. 인증 및 세션관리 방식
세션을 제공하는 인증방식을 사용하여야 한다.
-유출 될 가능성이 높다.
-로그인 할때만 세션 전달되게끔, 세션id에 대한 관리 중요 1. 인증 전/후가 달라야 한다
                                                    2. 추측할 수 없어야 한다.
                                                    3. 훔쳐가는걸 막아야 한다.


3. 크로스 사이트 스크립트 XSS
공격자가 전달한 스크립트 코드가 사용자 브라우저에서 실행되는 것.
방어하기 위해 입력값과 출력값을 검증한다.

4. CSRF 
서버쪽으로 요청이 발생하면 서버가 그 요청에 대한 검증을 하고 처리해야된다.
희생자의 권한으로 요청이 처리되서 자동으로 글이 써지거나 패스워드가 변경될 수 있다.
중요한 기능이면 그 사용자가 정상적인 절차에 따라 요청한것인지 확인해야 한다.
토큰 검증 (RECAPCHA ) 재인증, 

5. 파일 업/다운로드 취약점
업로드 기능을 제공하는 경우 외부에 접근할 수 없는 경로 지정
악용될 수 있다. 
다운로드를 구현할 때 제한된 범위 내에서 파일을 가져갈 수 있도록 
경로 조작 취약점에 유의하여야 한다.

키 길이, 키를 어떻게 보관하느냐.
중요한 정보를 전달할때는 암호화해야한다.

중요한 경우에 (특히 패스워드) -해시, 및 솔트. 솔트 안전하게 보관해야 한다.

리다이렉트, 포워드 - 검증 제한하지 않으면 의도하지 않은 사이트로 이동가능/
주소를 반드시 검증해야 한다.

서버 설정과 관련된 문제.